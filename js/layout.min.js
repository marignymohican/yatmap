$(document).ready(function(){function e(e){var o=.75*window.innerHeight;300>o&&(o=window.innerHeight),e.preventDefault(),$("#ssPanelContent").css({"margin-top":o*-.5,"padding-bottom":"10px"}).append($("#yatform form")),$("#ssPanel").fadeIn(200)}function o(e){return e.length-dotlist.length*Math.floor(e.length/dotlist.length)}function t(e){e=e.toLowerCase();for(var o=[{a:/\s+$/,b:""},{a:/\s+/g,b:"-"},{a:/\-+/g,b:"-"},{a:/[\.,\/#!$%\^&\*;:{}=_'"~()]/g,b:""},{a:/^the-/,b:""}],t=0;t<o.length;t++)e=e.replace(o[t].a,o[t].b);return e}function n(e){e=e.toLowerCase();var o=[{a:/faubourg\s/,b:""},{a:/^bayou\s/,b:""}];for(var t in o)e=e.replace(o[t].a,o[t].b);var n=[{a:/\s+$/,b:""},{a:/\s+/g,b:"-"},{a:/the-/,b:""},{a:/\./g,b:""}];for(var t in n)e=e.replace(n[t].a,n[t].b);return e}function a(){var e=$(window).height(),o=$(window).width();600>o?$("#map").width("100%").height(e-$("#nav").height()):($("#yatform").width(250).height(e-$("#nav").height()),$("#map").width(o-250).height(e-$("#nav").height())),$("#nav").height($("#nav #adv_network").height()+$("#nav .navbar").innerHeight()),$("#yatform form").height()>$("#yatform").innerHeight()?$("#yatform").css("overflow-y","scroll"):$("#yatform").css("overflow-y","hidden")}if(a(),$(window).resize(function(){a()}),document.cookie.indexOf("nola_yatmap")<0){var i="take me to the map!";$(window).width()<600&&(i="get started!"),$("#ymfaq").append('<div><h3><img style="width: 50%;" alt="Welcome to the Yat Map!" src="/maps/images/Yat-Map-cobrand.png" /></h3><div><p>Tell us &quot;Where y\'at&quot; and &quot;Whatcha\' call your neighborhood!&quot;</p><p>Type in your street address and what you call your neighborhood. Your response will appear on the map as a colored dot, right next to the responses of your neighbors. Do you agree on your neighborhood’s identity?</p><p>Thanks for adding your input to the database! Check back to see how your neighborhood’s identity shapes up over time.</p><div class="yfSubmitButton">'+i+"</div></div></div>");var r,s,l=365;r=.25*window.innerHeight,200>r&&(r=20,l=380),s={"margin-top":r},$("#ymfaq > div").css(s),$("#ymfaq").on("click",".yfSubmitButton",function(o){var t=new Date;t.setTime(t.getTime()+315569e5),document.cookie="nola_yatmap=true;expires="+t.toUTCString(),$(window).width()<600&&e(o),$("#ymfaq").remove()})}else $("#ymfaq").remove();$("#socialshare #ssComments").click(function(e){var o=.75*window.innerHeight;300>o&&(o=window.innerHeight),e.preventDefault(),$("#ssPanelContent").height(o).css("margin-top",o*-.5).append('<div id="commentFrame" style="width:100%; height:'+(o-25)+'px"><iframe seamless style="border:0; width:100%; height:75%;" src="'+$(this).attr("href")+'"></iframe></div>'),$("#ssPanel").fadeIn(200)}),$("#yfSubmitNav").click(function(o){e(o)}),$("#ssPanel #ssPanelClose").click(function(){$("#ssPanel").fadeOut(200),$("#ssPanelContent form").appendTo("#yatform"),$("#ssPanelContent #commentFrame").remove()});var d,h,g=new google.maps.LatLng(29.97457,-90.10068),m=window.outerWidth<600?11:12,p={center:g,zoom:m,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.DEFAULT,position:google.maps.ControlPosition.TOP_RIGHT},mapTypeControl:!1,panControl:!1,streetViewControl:!1,styles:mapstyles[2]},c={markersWontHide:!0,nearbyDistance:10},f=new google.maps.InfoWindow,w="",u="https://spreadsheets.google.com/feeds/list/16YsEZ7juHkC_DHxP0CafbqgCIGCR7_ED647FSIGhCik/1/public/values?alt=json",y=[];d=new google.maps.Map(document.getElementById("map-canvas"),p),h=new OverlappingMarkerSpiderfier(d,c),location.search&&window.setTimeout(function(){w=location.search.split("latlon=")[1],w=new google.maps.LatLng(w.split(",")[0],w.split(",")[1]),d.panTo(w),d.setZoom(18)},2e3),$.getJSON(u,function(e){for(var a=e.feed.entry,i=0;i<a.length;i++){var r=a[i].gsx$latlong.$t,s=n(a[i].gsx$whatneighborhooddoyoulivein.$t),l="dot-white";if(a[i].gsx$cityortown.$t.toLowerCase().indexOf("new orleans")>=0){for(var g=0;g<nhoodscolors.length;g++)if(s==t(nhoodscolors[g].NEIGHBORHOOD)){l=nhoodscolors[g].COLOR;break}}else{for(var g=0;g<nonNOcolors.length;g++)if(s==t(nonNOcolors[g].NEIGHBORHOOD)){l=nonNOcolors[g].COLOR;break}if("dot-white"==l){for(var g=0;g<y.length;g++)if(s==t(y[g].NEIGHBORHOOD)){l=y[g].COLOR;break}"dot-white"==l&&(l=dotlist[o(y)],y.push({NEIGHBORHOOD:s,COLOR:l}))}}var m=new google.maps.Marker({map:d,position:{lat:Number(r.split(",")[0]),lng:Number(r.split(",")[1])},icon:{url:"/maps/icons/dots/"+l+".png",size:new google.maps.Size(20,20),scaledSize:new google.maps.Size(20,20),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(10,10)}});$(m).data("yminfo",i),h.addMarker(m)}h.addListener("click",function(e){var o=$(e).data("yminfo");f.setContent('<div id="yatwindow"><h3>'+a[o].gsx$whatneighborhooddoyoulivein.$t+"</h3>"+a[o].gsx$whatisyouraddress.$t+"</div>"),f.open(d,e)}),h.addListener("spiderfy",function(){f.close()})})});